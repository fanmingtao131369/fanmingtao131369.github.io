<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>大民</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="笨鸟先飞">
<meta property="og:type" content="website">
<meta property="og:title" content="大民">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="大民">
<meta property="og:description" content="笨鸟先飞">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大民">
<meta name="twitter:description" content="笨鸟先飞">
  
    <link rel="alternate" href="/atom.xml" title="大民" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">大民</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-op" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/30/op/" class="article-date">
  <time datetime="2016-09-29T16:00:00.000Z" itemprop="datePublished">2016-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/30/op/">React Native</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="进入你创建的react-native文件，输入命令"><a href="#进入你创建的react-native文件，输入命令" class="headerlink" title="进入你创建的react-native文件，输入命令"></a>进入你创建的react-native文件，输入命令</h2><h2 id="mkdir-pandroid-app-src-main-assets"><a href="#mkdir-pandroid-app-src-main-assets" class="headerlink" title="mkdir -pandroid/app/src/main/assets"></a>mkdir -pandroid/app/src/main/assets</h2><h2 id="然后运行下面的命令生成一个index-android-bundle文件"><a href="#然后运行下面的命令生成一个index-android-bundle文件" class="headerlink" title="然后运行下面的命令生成一个index.android.bundle文件"></a>然后运行下面的命令生成一个index.android.bundle文件</h2><h2 id="react-native-bundle-–platform-android-–dev-false-–entry-file-index-android-js"><a href="#react-native-bundle-–platform-android-–dev-false-–entry-file-index-android-js" class="headerlink" title="react-native bundle –platform android –dev false –entry-file index.android.js"></a>react-native bundle –platform android –dev false –entry-file index.android.js</h2><h2 id="–bundle-output-android-app-src-main-assets-index-android-bundle"><a href="#–bundle-output-android-app-src-main-assets-index-android-bundle" class="headerlink" title="–bundle-output android/app/src/main/assets/index.android.bundle"></a>–bundle-output android/app/src/main/assets/index.android.bundle</h2><h2 id="–assets-dest-android-app-src-main-res"><a href="#–assets-dest-android-app-src-main-res" class="headerlink" title="–assets-dest android/app/src/main/res/"></a>–assets-dest android/app/src/main/res/</h2><h2 id="然后输入命令打包"><a href="#然后输入命令打包" class="headerlink" title="然后输入命令打包"></a>然后输入命令打包</h2><h2 id="cd-android-amp-amp-gradlew-assembleRelease"><a href="#cd-android-amp-amp-gradlew-assembleRelease" class="headerlink" title="cd android &amp;&amp; ./gradlew assembleRelease"></a>cd android &amp;&amp; ./gradlew assembleRelease</h2>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/09/30/op/" data-id="civlttxoj0002icvyn019qj2f" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/10/正则表达式/" class="article-date">
  <time datetime="2016-05-09T16:00:00.000Z" itemprop="datePublished">2016-05-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/10/正则表达式/">正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="知道这20个正则表达式，能让你少写1000行代码"><a href="#知道这20个正则表达式，能让你少写1000行代码" class="headerlink" title="知道这20个正则表达式，能让你少写1000行代码"></a>知道这20个正则表达式，能让你少写1000行代码</h2><h3 id="1-校验密码强度"><a href="#1-校验密码强度" class="headerlink" title="1.校验密码强度"></a>1.校验密码强度</h3><p>密码的强度必须是包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间</p>
<pre><code>^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$
</code></pre><h3 id="2-校验中文"><a href="#2-校验中文" class="headerlink" title="2.校验中文"></a>2.校验中文</h3><p>密码的强度必须是包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间。</p>
<pre><code>^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$
</code></pre><h3 id="3-由数字、26个英文字母或下划线组成的字符串"><a href="#3-由数字、26个英文字母或下划线组成的字符串" class="headerlink" title="3.由数字、26个英文字母或下划线组成的字符串"></a>3.由数字、26个英文字母或下划线组成的字符串</h3><pre><code>^\\w+$
</code></pre><h3 id="4-校验E-Mail-地址"><a href="#4-校验E-Mail-地址" class="headerlink" title="4.校验E-Mail 地址"></a>4.校验E-Mail 地址</h3><p>同密码一样，下面是E-mail地址合规性的正则检查语句。</p>
<pre><code>[\\w!#$%&amp;&apos;*+/=?^_`{|}~-]+(?:\\.[\\w!#$%&amp;&apos;*+/=?^_`{|}~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?
</code></pre><h3 id="5-校验身份证号码"><a href="#5-校验身份证号码" class="headerlink" title="5.校验身份证号码"></a>5.校验身份证号码</h3><p>下面是身份证号码的正则校验。15 或 18位。</p>
<p>15位：</p>
<pre><code>^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$
</code></pre><p>18位：</p>
<pre><code>^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$
</code></pre><h3 id="6-校验日期"><a href="#6-校验日期" class="headerlink" title="6.校验日期"></a>6.校验日期</h3><p>“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。</p>
<pre><code>^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$
</code></pre><h3 id="7-校验金额"><a href="#7-校验金额" class="headerlink" title="7.校验金额"></a>7.校验金额</h3><p>金额校验，精确到2位小数。</p>
<pre><code>^[0-9]+(.[0-9]{2})?$
</code></pre><h3 id="8-校验手机号"><a href="#8-校验手机号" class="headerlink" title="8.校验手机号"></a>8.校验手机号</h3><p>下面是国内 13、15、18开头的手机号正则表达式。（可根据目前国内收集号扩展前两位开头号码）</p>
<pre><code>^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$
</code></pre><h3 id="9-判断IE的版本"><a href="#9-判断IE的版本" class="headerlink" title="9.判断IE的版本"></a>9.判断IE的版本</h3><p>IE目前还没被完全取代，很多页面还是需要做版本兼容，下面是IE版本检查的表达式。</p>
<pre><code>^.*MSIE [5-8](?:\\.[0-9]+)?(?!.*Trident\\/[5-9]\\.0).*$
</code></pre><h3 id="10-校验IP-v4地址"><a href="#10-校验IP-v4地址" class="headerlink" title="10.校验IP-v4地址"></a>10.校验IP-v4地址</h3><p>IP4 正则语句。</p>
<pre><code>\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b
</code></pre><h3 id="11-校验IP-v6地址"><a href="#11-校验IP-v6地址" class="headerlink" title="11.校验IP-v6地址"></a>11.校验IP-v6地址</h3><p>IP6 正则语句。</p>
<pre><code>(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))
</code></pre><h3 id="12-检查URL的前缀"><a href="#12-检查URL的前缀" class="headerlink" title="12.检查URL的前缀"></a>12.检查URL的前缀</h3><p>应用开发中很多时候需要区分请求是HTTPS还是HTTP，通过下面的表达式可以取出一个url的前缀然后再逻辑判断。</p>
<pre><code>if (!s.match(/^[a-zA-Z]+:\\/\\//))
</code></pre><p>{<br>    s = ‘http://‘ + s;<br>}</p>
<h3 id="13-提取URL链接"><a href="#13-提取URL链接" class="headerlink" title="13.提取URL链接"></a>13.提取URL链接</h3><p>下面的这个表达式可以筛选出一段文本中的URL。</p>
<pre><code>^(f|ht){1}(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&amp;=]*)?
</code></pre><h3 id="14-文件路径及扩展名校验"><a href="#14-文件路径及扩展名校验" class="headerlink" title="14.文件路径及扩展名校验"></a>14.文件路径及扩展名校验</h3><p>验证windows下文件路径和扩展名（下面的例子中为.txt文件）</p>
<pre><code>^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?&quot;&lt;&gt;|]+\\.txt(l)?$
</code></pre><h3 id="15-提取Color-Hex-Codes"><a href="#15-提取Color-Hex-Codes" class="headerlink" title="15.提取Color Hex Codes"></a>15.提取Color Hex Codes</h3><p>有时需要抽取网页中的颜色代码，可以使用下面的表达式。</p>
<pre><code>^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
</code></pre><h3 id="16-提取网页图片"><a href="#16-提取网页图片" class="headerlink" title="16.提取网页图片"></a>16.提取网页图片</h3><p>假若你想提取网页中所有图片信息，可以利用下面的表达式。</p>
<pre><code>\\&lt; *[img][^\\\\&gt;]*[src] *= *[\\&quot;\\&apos;]{0,1}([^\\&quot;\\&apos;\\ &gt;]*)
</code></pre><h3 id="17-提取页面超链接"><a href="#17-提取页面超链接" class="headerlink" title="17.提取页面超链接"></a>17.提取页面超链接</h3><p>提取html中的超链接。</p>
<pre><code>(&lt;a\\s*(?!.*\\brel=)[^&gt;]*)(href=&quot;https?:\\/\\/)((?!(?:(?:www\\.)?&apos;.implode(&apos;|(?:www\\.)?&apos;, $follow_list).&apos;))[^&quot;]+)&quot;((?!.*\\brel=)[^&gt;]*)(?:[^&gt;]*)&gt;
</code></pre><h3 id="18-查找CSS属性"><a href="#18-查找CSS属性" class="headerlink" title="18.查找CSS属性"></a>18.查找CSS属性</h3><p>通过下面的表达式，可以搜索到相匹配的CSS属性。</p>
<pre><code>^\\s*[a-zA-Z\\-]+\\s*[:]{1}\\s[a-zA-Z0-9\\s.#]+[;]{1}
</code></pre><h3 id="19-抽取注释"><a href="#19-抽取注释" class="headerlink" title="19.抽取注释"></a>19.抽取注释</h3><p>如果你需要移除HMTL中的注释，可以使用如下的表达式。</p>
<pre><code>&lt;!--(.*?)--&gt;
</code></pre><h3 id="20-匹配HTML标签"><a href="#20-匹配HTML标签" class="headerlink" title="20.匹配HTML标签"></a>20.匹配HTML标签</h3><p>通过下面的表达式可以匹配出HTML中的标签属性。</p>
<pre><code>&lt;\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:&quot;.*?&quot;|&apos;.*?&apos;|[\\^&apos;&quot;&gt;\\s]+))?)+\\s*|\\s*)\\/?&gt;
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/05/10/正则表达式/" data-id="civlttxov0005icvydzk5jryh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-node-js" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/13/node-js/" class="article-date">
  <time datetime="2016-04-12T16:00:00.000Z" itemprop="datePublished">2016-04-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/13/node-js/">node.js之fs模块</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Node-js的文件系统的Api"><a href="#Node-js的文件系统的Api" class="headerlink" title="Node.js的文件系统的Api"></a>Node.js的文件系统的Api</h3><pre><code>//公共引用
var fs = require(&apos;fs&apos;),
path = require(&apos;path&apos;);
</code></pre><h3 id="1-读取文件readFile函数"><a href="#1-读取文件readFile函数" class="headerlink" title="1.读取文件readFile函数"></a>1.读取文件readFile函数</h3><pre><code>//readFile(filename,[options],callback);
/**
 * filename, 必选参数，文件名
* [options],可选参数，可指定flag（文件操作选项，如r+ 读写；w+ 读写，文件不存在则创建）及encoding属性
 * callback 读取文件后的回调函数，参数默认第一个err,第二个data 数据
 */
fs.readFile(__dirname + &apos;/test.txt&apos;, {flag: &apos;r+&apos;, encoding: &apos;utf8&apos;}, function (err, data) {
    if(err) {
     console.error(err);
     return;
    }
    console.log(data);
});
</code></pre><h3 id="2-写文件"><a href="#2-写文件" class="headerlink" title="2.写文件"></a>2.写文件</h3><pre><code>// fs.writeFile(filename,data,[options],callback);
var w_data = &apos;这是一段通过fs.writeFile函数写入的内容；\r\n&apos;;
var w_data = new Buffer(w_data);
/**
 * filename, 必选参数，文件名
 * data, 写入的数据，可以字符或一个Buffer对象
 * [options],flag,mode(权限),encoding
 * callback 读取文件后的回调函数，参数默认第一个err,第二个data 数据
 */
fs.writeFile(__dirname + &apos;/test.txt&apos;, w_data, {flag: &apos;a&apos;},function (err) {
   if(err) {
    console.error(err);
    } else {
       console.log(&apos;写入成功&apos;);
    }
});
</code></pre><h3 id="3-以追加方式写文件"><a href="#3-以追加方式写文件" class="headerlink" title="3.以追加方式写文件"></a>3.以追加方式写文件</h3><pre><code>// fs.appendFile(filename,data,[options],callback);
fs.appendFile(__dirname + &apos;/test.txt&apos;, &apos;使用fs.appendFile追加文件内容&apos;, function () {
  console.log(&apos;追加内容完成&apos;);
});
</code></pre><h3 id="4-打开文件"><a href="#4-打开文件" class="headerlink" title="4.打开文件"></a>4.打开文件</h3><pre><code>// fs.open(filename, flags, [mode], callback);
/**
 * filename, 必选参数，文件名
 * flags, 操作标识，如&quot;r&quot;,读方式打开
 * [mode],权限，如777，表示任何用户读写可执行
 * callback 打开文件后回调函数，参数默认第一个err,第二个fd为一个整数，表示打开文件返回的文件描述符，window中又称文件句柄
 */
fs.open(__dirname + &apos;/test.txt&apos;, &apos;r&apos;, &apos;0666&apos;, function (err, fd) {
  console.log(fd);
});
</code></pre><h3 id="5-读文件，读取打开的文件内容到缓冲区中；"><a href="#5-读文件，读取打开的文件内容到缓冲区中；" class="headerlink" title="5.读文件，读取打开的文件内容到缓冲区中；"></a>5.读文件，读取打开的文件内容到缓冲区中；</h3><pre><code>//fs.read(fd, buffer, offset, length, position, callback);
/**
 * fd, 使用fs.open打开成功后返回的文件描述符
 * buffer, 一个Buffer对象，v8引擎分配的一段内存
 * offset, 整数，向缓存区中写入时的初始位置，以字节为单位
 * length, 整数，读取文件的长度
 * position, 整数，读取文件初始位置；文件大小以字节为单位
 * callback(err, bytesRead, buffer), 读取执行完成后回调函数，bytesRead实际读取字节数，被读取的缓存区对象
 */
fs.open(__dirname + &apos;/test.txt&apos;, &apos;r&apos;, function (err, fd) {
  if(err) {
console.error(err);
return;
  } else {
var buffer = new Buffer(255);
console.log(buffer.length);
//每一个汉字utf8编码是3个字节，英文是1个字节
fs.read(fd, buffer, 0, 9, 3, function (err, bytesRead, buffer) {
  if(err) {
    throw err;
  } else {
    console.log(bytesRead);
    console.log(buffer.slice(0, bytesRead).toString());
    //读取完后，再使用fd读取时，基点是基于上次读取位置计算；
    fs.read(fd, buffer, 0, 9, null, function (err, bytesRead, buffer) {
      console.log(bytesRead);
      console.log(buffer.slice(0, bytesRead).toString());
    });
  }
});
  }});
</code></pre><h3 id="6-写文件，将缓冲区内数据写入使用fs-open打开的文件"><a href="#6-写文件，将缓冲区内数据写入使用fs-open打开的文件" class="headerlink" title="6.写文件，将缓冲区内数据写入使用fs.open打开的文件"></a>6.写文件，将缓冲区内数据写入使用fs.open打开的文件</h3><pre><code>//fs.write(fd, buffer, offset, length, position, callback);
/**
 * fd, 使用fs.open打开成功后返回的文件描述符
 * buffer, 一个Buffer对象，v8引擎分配的一段内存
 * offset, 整数，从缓存区中读取时的初始位置，以字节为单位
 * length, 整数，从缓存区中读取数据的字节数
 * position, 整数，写入文件初始位置；
 * callback(err, written, buffer), 写入操作执行完成后回调函数，written实际写入字节数，buffer被读取的缓存区对象
 */
fs.open(__dirname + &apos;/test.txt&apos;, &apos;a&apos;, function (err, fd) {
  if(err) {
console.error(err);
return;
  } else {
var buffer = new Buffer(&apos;写入文件数据内容&apos;);
//写入&apos;入文件&apos;三个字
fs.write(fd, buffer, 3, 9, 12, function (err, written, buffer) {
  if(err) {
    console.log(&apos;写入文件失败&apos;);
    console.error(err);
    return;
  } else {
    console.log(buffer.toString());
    //写入&apos;数据内&apos;三个字
    fs.write(fd, buffer, 12, 9, null, function (err, written, buffer) {
      console.log(buffer.toString());
    })
  }
});
  }
});
</code></pre><h3 id="7-刷新缓存区"><a href="#7-刷新缓存区" class="headerlink" title="7.刷新缓存区"></a>7.刷新缓存区</h3><pre><code>// 使用fs.write写入文件时，操作系统是将数据读到内存，再把数据写入到文件中，当数据读完时并不代表数据已经写完，因为有一部分还可能在内在缓冲区内。
// 因此可以使用fs.fsync方法将内存中数据写入文件；--刷新内存缓冲区；
//fs.fsync(fd, [callback])
/**
 * fd, 使用fs.open打开成功后返回的文件描述符
 * [callback(err, written, buffer)], 写入操作执行完成后回调函数，written实际写入字节数，buffer被读取的缓存区对象
 */
fs.open(__dirname + &apos;/test.txt&apos;, &apos;a&apos;, function (err, fd) {
  if(err)
throw err;
  var buffer = new Buffer(&apos;我爱nodejs编程&apos;);
  fs.write(fd, buffer, 0, 9, 0, function (err, written, buffer) {
console.log(written.toString());
fs.write(fd, buffer, 9, buffer.length - 9, null, function (err, written) {
  console.log(written.toString());
  fs.fsync(fd);
  fs.close(fd);
})
  });
});
</code></pre><h3 id="8-创建目录"><a href="#8-创建目录" class="headerlink" title="8.创建目录;"></a>8.创建目录;</h3><pre><code>//使用fs.mkdir创建目录
//fs.mkdir(path, [mode], callback);
/**
 * path, 被创建目录的完整路径及目录名；
 * [mode], 目录权限，默认0777
 * [callback(err)], 创建完目录回调函数,err错误对象
 */
fs.mkdir(__dirname + &apos;/fsDir&apos;, function (err) {
  if(err)
throw err;
  console.log(&apos;创建目录成功&apos;)
});
</code></pre><h3 id="9-读取目录"><a href="#9-读取目录" class="headerlink" title="9.读取目录"></a>9.读取目录</h3><pre><code>//使用fs.readdir读取目录，重点其回调函数中files对象
//fs.readdir(path, callback);
/**
 * path, 要读取目录的完整路径及目录名；
 * [callback(err, files)], 读完目录回调函数；err错误对象，files数组，存放读取到的目录中的所有文件名
 */
fs.readdir(__dirname + &apos;/fsDir/&apos;, function (err, files) {
  if(err) {
console.error(err);
return;
  } else {
files.forEach(function (file) {
  var filePath = path.normalize(__dirname + &apos;/fsDir/&apos; + file);
  fs.stat(filePath, function (err, stat) {
    if(stat.isFile()) {
      console.log(filePath + &apos; is: &apos; + &apos;file&apos;);
    }
    if(stat.isDirectory()) {
      console.log(filePath + &apos; is: &apos; + &apos;dir&apos;);
    }
  });
});
for (var i = 0; i &lt; files.length; i++) {
  //使用闭包无法保证读取文件的顺序与数组中保存的致
  (function () {
    var filePath = path.normalize(__dirname + &apos;/fsDir/&apos; + files[i]);
    fs.stat(filePath, function (err, stat) {
      if(stat.isFile()) {
        console.log(filePath + &apos; is: &apos; + &apos;file&apos;);
      }
      if(stat.isDirectory()) {
        console.log(filePath + &apos; is: &apos; + &apos;dir&apos;);
      }
    });
  })();
}
  }
});
</code></pre><h3 id="10-查看文件与目录的信息"><a href="#10-查看文件与目录的信息" class="headerlink" title="10.查看文件与目录的信息"></a>10.查看文件与目录的信息</h3><pre><code>//fs.stat(path, callback);
//fs.lstat(path, callback); //查看符号链接文件
/**
 * path, 要查看目录/文件的完整路径及名；
 * [callback(err, stats)], 操作完成回调函数；err错误对象，stat fs.Stat一个对象实例，提供如:isFile, isDirectory,isBlockDevice等方法及size,ctime,mtime等属性
 */
//实例，查看fs.readdir
</code></pre><h3 id="11-查看文件与目录的是否存在"><a href="#11-查看文件与目录的是否存在" class="headerlink" title="11.查看文件与目录的是否存在"></a>11.查看文件与目录的是否存在</h3><pre><code>//fs.exists(path, callback);
/**
 * path, 要查看目录/文件的完整路径及名；
 * [callback(exists)], 操作完成回调函数；exists true存在，false表示不存在
 */
fs.exists(__dirname + &apos;/te&apos;, function (exists) {
  var retTxt = exists ? retTxt = &apos;文件存在&apos; : &apos;文件不存在&apos;;
  console.log(retTxt);
});
</code></pre><h3 id="12-修改文件访问时间与修改时间"><a href="#12-修改文件访问时间与修改时间" class="headerlink" title="12.修改文件访问时间与修改时间"></a>12.修改文件访问时间与修改时间</h3><pre><code>//fs.utimes(path, atime, mtime, callback);
/**
 * path, 要查看目录/文件的完整路径及名；
 * atime, 新的访问时间
 * ctime, 新的修改时间
 * [callback(err)], 操作完成回调函数；err操作失败对象
 */
fs.utimes(__dirname + &apos;/test.txt&apos;, new Date(), new Date(), function (err) {
  if(err) {
console.error(err);
return;
  }
  fs.stat(__dirname + &apos;/test.txt&apos;, function (err, stat) {
console.log(&apos;访问时间: &apos; + stat.atime.toString() + &apos;; \n修改时间：&apos; + stat.mtime);
console.log(stat.mode);
  })
});
</code></pre><h3 id="13-修改文件或目录的操作权限"><a href="#13-修改文件或目录的操作权限" class="headerlink" title="13.修改文件或目录的操作权限"></a>13.修改文件或目录的操作权限</h3><pre><code>//fs.utimes(path, mode, callback);
/**
 * path, 要查看目录/文件的完整路径及名；
 * mode, 指定权限，如：0666 8进制，权限：所有用户可读、写，
 * [callback(err)], 操作完成回调函数；err操作失败对象
 */
fs.chmod(__dirname + &apos;/fsDir&apos;, 0666, function (err) {
  if(err) {
console.error(err);
return;
  }
  console.log(&apos;修改权限成功&apos;)
});
</code></pre><h3 id="14-移动-重命名文件或目录"><a href="#14-移动-重命名文件或目录" class="headerlink" title="14.移动/重命名文件或目录"></a>14.移动/重命名文件或目录</h3><pre><code>//fs.rename(oldPath, newPath, callback);
</code></pre><p>/**</p>
<ul>
<li>oldPath, 原目录/文件的完整路径及名；</li>
<li>newPath, 新目录/文件的完整路径及名；如果新路径与原路径相同，而只文件名不同，则是重命名</li>
<li><p>[callback(err)], 操作完成回调函数；err操作失败对象<br>*/<br>fs.rename(<strong>dirname + ‘/test’, </strong>dirname + ‘/fsDir’, function (err) {<br>if(err) {<br> console.error(err);<br> return;<br>}<br>console.log(‘重命名成功’)<br>});</p>
<h3 id="15、删除空目录"><a href="#15、删除空目录" class="headerlink" title="15、删除空目录"></a>15、删除空目录</h3><p> //fs.rmdir(path, callback);<br> /**</p>
<ul>
<li>path, 目录的完整路径及目录名；</li>
<li>[callback(err)], 操作完成回调函数；err操作失败对象<br>*/<br>fs.rmdir(<strong>dirname + ‘/test’, function (err) {<br>fs.mkdir(</strong>dirname + ‘/test’, 0666, function (err) {<br>console.log(‘创建test目录’);<br>});<br>if(err) {<br>console.log(‘删除空目录失败，可能原因：1、目录不存在，2、目录不为空’)<br>console.error(err);<br>return;<br>}<br>console.log(‘删除空目录成功!’);<br>});</li>
</ul>
<p>原文链接：<br><a href="http://www.jianshu.com/p/5683c8a93511" target="_blank" rel="external">http://www.jianshu.com/p/5683c8a93511</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/04/13/node-js/" data-id="civlttxor0004icvybm2izixa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-16个上谷歌的方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/01/16个上谷歌的方法/" class="article-date">
  <time datetime="2015-12-31T16:00:00.000Z" itemprop="datePublished">2016-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/01/16个上谷歌的方法/">16个上谷歌的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://guge.io/" target="_blank" rel="external">https://guge.io/</a><br><a href="http://www.g363.com/" target="_blank" rel="external">http://www.g363.com/</a><br><a href="http://web.btbook.net/" target="_blank" rel="external">http://web.btbook.net/</a><br><a href="https://www.out1000.com/" target="_blank" rel="external">https://www.out1000.com/</a><br><a href="http://www.googke.me/" target="_blank" rel="external">http://www.googke.me/</a><br><a href="http://www.wow.com/" target="_blank" rel="external">http://www.wow.com/</a><br><a href="https://www.booo.so/" target="_blank" rel="external">https://www.booo.so/</a><br><a href="http://gl.randomk.org/" target="_blank" rel="external">http://gl.randomk.org/</a><br><a href="http://www.googleforchina.com/index_desktop.html" target="_blank" rel="external">http://www.googleforchina.com/index_desktop.html</a><br><a href="http://google.ihuan.me/" target="_blank" rel="external">http://google.ihuan.me/</a><br><a href="http://www.gugesou.com/" target="_blank" rel="external">http://www.gugesou.com/</a><br><a href="http://www.egeso.com/" target="_blank" rel="external">http://www.egeso.com/</a><br><a href="http://ggsousuo.duapp.com/" target="_blank" rel="external">http://ggsousuo.duapp.com/</a><br><a href="http://so.jieshang.net/" target="_blank" rel="external">http://so.jieshang.net/</a><br><a href="https://www.gotosearch.info/" target="_blank" rel="external">https://www.gotosearch.info/</a><br><a href="http://www.googto.com/" target="_blank" rel="external">http://www.googto.com/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/01/01/16个上谷歌的方法/" data-id="civlttxop0003icvywg7h4m78" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Mongodb" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/01/Mongodb/" class="article-date">
  <time datetime="2015-11-01T00:00:00.000Z" itemprop="datePublished">2015-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/01/Mongodb/">Mongodb</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Mongodb"><a href="#Mongodb" class="headerlink" title="Mongodb"></a>Mongodb</h2><hr>
<h3 id="1-创建数据库"><a href="#1-创建数据库" class="headerlink" title="1.创建数据库"></a>1.创建数据库</h3><p><code>use DATABASE_NAME</code></p>
<hr>
<h3 id="2-删除数据库"><a href="#2-删除数据库" class="headerlink" title="2.删除数据库"></a>2.删除数据库</h3><p><code>db.dropDatabase()</code></p>
<hr>
<h3 id="3-插入文档"><a href="#3-插入文档" class="headerlink" title="3.插入文档"></a>3.插入文档</h3><p><code>db.COLLECTION_NAME.insert(document)</code></p>
<hr>
<h3 id="4-更新文档"><a href="#4-更新文档" class="headerlink" title="4.更新文档"></a>4.更新文档</h3><p><code>db.collection.update(&lt;query&gt;,&lt;update&gt;,{upsert: &lt;boolean&gt;,multi:&lt;boolean&gt;,writeConcern: &lt;document&gt;})</code></p>
<p><code>query:update</code>的查询条件，类似sql update查询内where后面的。</p>
<p><code>update:update</code>的对象和一些更新的操作符（如<strong>$,$inc…</strong>）等，也可以理解为<strong>sql update</strong>查询内<strong>set</strong>后面的</p>
<p><code>multi:</code>可选，<strong>mongodb</strong> 默认是<strong>false</strong>,只更新找到的第一条记录，如果这个参数为<strong>true</strong>,就把按条件查出来多条记录全部更新。</p>
<p><code>writeConcern:</code>可选，抛出异常的级别。</p>
<hr>
<h3 id="5-删除文档"><a href="#5-删除文档" class="headerlink" title="5.删除文档"></a>5.删除文档</h3><p><code>remove()</code> 方法的基本语法格式如下所示：</p>
<p><code>db.collection.remove(&lt;query&gt;,&lt;justOne&gt;)</code></p>
<p>如果你的 <strong>MongoDB</strong>是<strong>2.6</strong>版本以后的，语法格式如下：</p>
<p><code>db.collection.remove(&lt;query&gt;,{justOne: &lt;boolean&gt;,writeConcern: &lt;document&gt;})</code></p>
<p><code>query</code>:（可选）删除的文档的条件。</p>
<p><code>justOne</code> : （可选）如果设为 <strong>true</strong> 或 <strong>1</strong>，则只删除一个文档。</p>
<p><code>writeConcern</code> :（可选）抛出异常的级别。</p>
<hr>
<h3 id="6-查询文档"><a href="#6-查询文档" class="headerlink" title="6.查询文档"></a>6.查询文档</h3><p><code>MongoDB</code> 查询数据的语法格式如下：</p>
<p><code>MongoDB 查询数据的语法格式如下：</code></p>
<p><code>find()</code> 方法以非结构化的方式来显示所有文档。<br>如果你需要以易读的方式来读取数据，可以使用 <strong>pretty()</strong> 方法，语法格式如下：</p>
<p><code>db.col.find().pretty()</code></p>
<p><code>pretty()</code> 方法以格式化的方式来显示所有文档</p>
<hr>
<h3 id="7-排序"><a href="#7-排序" class="headerlink" title="7.排序"></a>7.排序</h3><p>在<strong>MongoDB</strong>中使用使用<strong>sort()</strong>方法对数据进行排序，<strong>sort()</strong>方法可以通过参数指定排序的字段，并使用 <strong>1</strong> 和 <strong>-1</strong> 来指定排序的方式，其中 <strong>1</strong> 为升序排列，而<strong>-1</strong>是用于降序排列</p>
<p><code>sort()</code>方法基本语法如下所示：</p>
<p><code>db.COLLECTION_NAME.find().sort({KEY:1})</code></p>
<hr>
<h3 id="8-索引"><a href="#8-索引" class="headerlink" title="8.索引"></a>8.索引</h3><p>索引通常能够极大的提高查询的效率，如果没有索引，<strong>MongoDB</strong>在读取数据时必须扫描集合中的每个文件并选取那些符合查询条件的记录</p>
<p><strong>MongoDB</strong>使用 <strong>ensureIndex()</strong> 方法来创建索引</p>
<p><code>ensureIndex()</code>方法基本语法格式如下所示</p>
<p><code>db.COLLECTION_NAME.ensureIndex({KEY:1})</code></p>
<p>语法中 <strong>Key</strong> 值为你要创建的索引字段，<strong>1</strong>为指定按升序创建索引，如果你想按降序来创建索引指定为<strong>-1</strong>即可</p>
<hr>
<h3 id="9-聚合"><a href="#9-聚合" class="headerlink" title="9.聚合"></a>9.聚合</h3><p><strong>MongoDB</strong>中聚合(<strong>aggregate</strong>)主要用于处理数据(诸如统计平均值,求和等)，并返回计算后的数据结果。有点类似<strong>sql</strong>语句中的 <strong>count(*)</strong></p>
<p><strong>MongoDB</strong>中聚合的方法使用<strong>aggregate()</strong></p>
<p><code>aggregate()</code> 方法的基本语法格式如下所示：</p>
<p><code>db.COLLECTION_NAME.aggregate(AGGREGATE_OPERATION)</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/01/Mongodb/" data-id="civlttxo50000icvypxn3vbxg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-HTML优化" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/25/HTML优化/" class="article-date">
  <time datetime="2015-10-24T16:00:00.000Z" itemprop="datePublished">2015-10-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/25/HTML优化/">HTML 优化</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-减少HTTP请求次数"><a href="#1-减少HTTP请求次数" class="headerlink" title="1.减少HTTP请求次数"></a>1.减少HTTP请求次数</h3><p>尽量合并图片、CSS、JS。比如加载一个页面，如果有5个css文件的话，那么会发出5次http请求，这样会让用户第一次访问你的页面的时候会长时间等待。而如果把这个5个文件合成一个的话，就只需要发出一次http请求，节省网络请求时间，加快页面的加载。</p>
<h3 id="2-把CSS放到顶部"><a href="#2-把CSS放到顶部" class="headerlink" title="2.把CSS放到顶部"></a>2.把CSS放到顶部</h3><p>网页上的资源加载时从上网下顺序加载的，所以css放在页面的顶部能够优先渲染页面，让用户感觉页面加载很快。</p>
<h3 id="3-把JS放到底部"><a href="#3-把JS放到底部" class="headerlink" title="3.把JS放到底部"></a>3.把JS放到底部</h3><p>加载js时会对后续的资源造成阻塞，必须得等js加载完才去加载后续的文件 ，所以就把js放在页面底部最后加载。</p>
<h3 id="4-将CSS和JS放到外部文件中"><a href="#4-将CSS和JS放到外部文件中" class="headerlink" title="4.将CSS和JS放到外部文件中"></a>4.将CSS和JS放到外部文件中</h3><p>目的是缓存文件，可以参考原则4。 但有时候为了减少请求，也会直接写到页面里，需根据PV和IP的比例权衡。</p>
<h3 id="5-删除重复的JS和CSS"><a href="#5-删除重复的JS和CSS" class="headerlink" title="5.删除重复的JS和CSS"></a>5.删除重复的JS和CSS</h3><p>重复调用脚本，除了增加额外的HTTP请求外，多次运算也会浪费时间。在IE和Firefox中不管脚本是否可缓存，它们都存在重复运算JavaScript的问题。</p>
<h3 id="6-减少DOM元素数量"><a href="#6-减少DOM元素数量" class="headerlink" title="6. 减少DOM元素数量"></a>6. 减少DOM元素数量</h3><p>这是一门大学问，这里可以引申出一堆优化的细节。想要具体研究的可以看后面推荐书籍。总之大原则减少DOM数量，就会减少浏览器的解析负担。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/25/HTML优化/" data-id="civlttxod0001icvyzjwlamcy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">十一月 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/09/30/op/">React Native</a>
          </li>
        
          <li>
            <a href="/2016/05/10/正则表达式/">正则表达式</a>
          </li>
        
          <li>
            <a href="/2016/04/13/node-js/">node.js之fs模块</a>
          </li>
        
          <li>
            <a href="/2016/01/01/16个上谷歌的方法/">16个上谷歌的方法</a>
          </li>
        
          <li>
            <a href="/2015/11/01/Mongodb/">Mongodb</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 范明涛<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>